<div x-data="init()" class="w-full mb-4 lg:right-8 lg:absolute lg:w-80 z-50 ">
    <div class="lg:rounded-lg bg-white border-4 border-black w-full lg:w-80 flex flex-row align-middle justify-center items-center">
      <svg  width="24" height="24" fill="none" class="text-gray-400 mx-2 group-hover:text-gray-500 transition-colors duration-200"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        <input
        class="w-full py-2 rounded-lg text-black font-serif text-lg"
        type="text"
        placeholder="Recherche rapide"
        x-model="q"
        @keyup="search" />
    </div>
    <div x-show="results.length" class="bg-white absolute w-full top-14 z-50 lg:block border-black border-4 lg:rounded-lg mt-2 p-4">
      <template x-for="result in results">
        <ul class="text-black z-50">
            <li><a class="hover:underline font-serif" :href="result.uri" x-text="result.title"></a></li>
        </ul> 
      </template>
    </div>
</div>

<script>
    function init() {
        if(!lunrIndex) initLunrIndex()
        return {
          results: [],
          q: "",
          search: function () { 
            if(this.q.length >= 3) {
              terms = this.q.split(" ").map((words)=>{ return words+'*'}).join(" ") 
              console.log(terms)
              lunrSearch(terms)
              .then((response) => {
                console.log(response);
                this.results = response})
              .catch((err) => console.log(err));
            }
          },
        };
      }
</script>